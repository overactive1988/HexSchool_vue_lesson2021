(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1561c14"],{"07ac":function(t,e,c){var o=c("23e7"),n=c("6f53").values;o({target:"Object",stat:!0},{values:function(t){return n(t)}})},"6f53":function(t,e,c){var o=c("83ab"),n=c("df75"),l=c("fc6a"),a=c("d1e7").f,r=function(t){return function(e){var c,r=l(e),i=n(r),d=i.length,s=0,u=[];while(d>s)c=i[s++],o&&!a.call(r,c)||u.push(t?[c,r[c]]:r[c]);return u}};t.exports={entries:r(!0),values:r(!1)}},"724a":function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var o=c("7a23"),n={class:"container content"},l=Object(o["h"])("h1",{class:"text-center"},"商品列表",-1),a={class:"text-end mt-4"},r={class:"table mt-4"},i=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",{width:"6%"},"排序"),Object(o["h"])("th",{width:"10%"},"商品縮圖"),Object(o["h"])("th",{width:"10%"},"商品名稱"),Object(o["h"])("th",{width:"20%"},"商品敘述"),Object(o["h"])("th",{width:"12%"},"商品規格"),Object(o["h"])("th",{width:"10%"},"原價"),Object(o["h"])("th",{width:"10%"},"售價"),Object(o["h"])("th",{width:"10%"},"是否啟用"),Object(o["h"])("th",{width:"12%"},"刪除")])],-1),d={class:"align-middle"},s={key:0,class:"text-success"},u={key:1},b={class:"btn-group"},p=Object(o["g"])(" 總共有 "),h={id:"productCount"},m=Object(o["g"])(" 項商品 "),j={class:"d-flex justify-content-center mt-5 mb-4"};function O(t,e,c,O,f,g){var v=Object(o["C"])("Pagination"),w=Object(o["C"])("AdminProductModal"),y=Object(o["C"])("DelProductModal");return Object(o["v"])(),Object(o["d"])("div",n,[l,Object(o["h"])("div",a,[Object(o["h"])("button",{onClick:e[1]||(e[1]=function(t){return g.openModal("new")}),class:"btn btn-primary"}," 建立新的商品 ")]),Object(o["h"])("table",r,[i,(Object(o["v"])(!0),Object(o["d"])(o["a"],null,Object(o["B"])(f.products,(function(e){return Object(o["v"])(),Object(o["d"])("tbody",{id:"productList",key:e},[Object(o["h"])("tr",d,[Object(o["h"])("td",null,Object(o["F"])(e.num),1),Object(o["h"])("td",null,[Object(o["h"])("img",{class:"product-img",src:e.imageUrl,alt:e.title},null,8,["src","alt"])]),Object(o["h"])("td",null,Object(o["F"])(e.title),1),Object(o["h"])("td",null,Object(o["F"])(e.description),1),Object(o["h"])("td",null,Object(o["F"])(e.content),1),Object(o["h"])("td",null,Object(o["F"])(t.$filters.currency(e.origin_price)),1),Object(o["h"])("td",null,Object(o["F"])(t.$filters.currency(e.price)),1),Object(o["h"])("td",null,[e.is_enabled?(Object(o["v"])(),Object(o["d"])("span",s,"啟用")):(Object(o["v"])(),Object(o["d"])("span",u,"未啟用"))]),Object(o["h"])("td",null,[Object(o["h"])("div",b,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return g.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return g.openModal("delete",e)}}," 刪除 ",8,["onClick"])])])])])})),128))]),Object(o["h"])("p",null,[p,Object(o["h"])("span",h,Object(o["F"])(f.allproductsNum.length),1),m]),Object(o["h"])("div",j,[Object(o["h"])(v,{page:f.pagination,onGetPage:g.getData},null,8,["page","onGetPage"])]),Object(o["h"])(w,{ref:"adminModal","props-product":f.tempProduct,onUpdateProduct:g.updateProduct},null,8,["props-product","onUpdateProduct"]),Object(o["h"])(y,{ref:"adminDelModal","props-product":f.tempProduct,onDeleteProduct:g.deleteProduct},null,8,["props-product","onDeleteProduct"])])}var f=c("5530"),g=(c("99af"),c("07ac"),c("1799")),v=(c("a434"),{class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),w={class:"modal-dialog modal-xl modal-dialog-centered"},y={class:"modal-content border-0"},P={class:"modal-header bg-primary text-white"},k={id:"productModalLabel",class:"modal-title"},U={key:0},x={key:1},M=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},N={class:"row"},$={class:"col-sm-4"},D={class:"mb-1"},I={class:"form-group"},_=Object(o["h"])("label",{class:"text-light bg-secondary mb-2 py-1 px-2",for:"mainImageUrl"},"請輸入主圖片網址",-1),J={class:"btn btn-outline-success btn-sm d-block w-100 mt-3"},V=Object(o["g"])(" 上傳圖片 "),F=Object(o["h"])("div",{class:"mt-4 mb-1"},"多圖新增",-1),A={key:0},S=Object(o["h"])("hr",null,null,-1),L={class:"form-group"},B={class:"\r\n                          btn btn-outline-success btn-sm\r\n                          d-block\r\n                          w-100\r\n                          my-3\r\n                        "},G=Object(o["g"])(" 上傳圖片 "),E={class:"mb2"},T={key:0,class:"mt-4"},q={key:1},z={class:"mt-4 mb-2"},H={class:"col-sm-8"},K={class:"form-group"},Q=Object(o["h"])("label",{for:"title"},"標題",-1),R={class:"row mt-3"},W={class:"form-group col-md-6"},X=Object(o["h"])("label",{for:"category"},"分類",-1),Y={class:"form-group col-md-6"},Z=Object(o["h"])("label",{for:"unit"},"單位(個、台、隻...)",-1),tt={class:"row mt-3"},et={class:"form-group col-md-6"},ct=Object(o["h"])("label",{for:"origin_price"},"原價",-1),ot={class:"form-group col-md-6"},nt=Object(o["h"])("label",{for:"price"},"售價",-1),lt=Object(o["h"])("hr",null,null,-1),at={class:"form-group"},rt=Object(o["h"])("label",{for:"description"},"商品描述",-1),it={class:"form-group mt-3"},dt=Object(o["h"])("label",{for:"content"},"商品規格",-1),st=Object(o["h"])("hr",null,null,-1),ut={class:"form-group"},bt=Object(o["h"])("label",{for:"stuck"},"庫存(選填)",-1),pt={class:"form-group mt-3"},ht={class:"form-check"},mt=Object(o["h"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),jt={class:"modal-footer"},Ot=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ft(t,e,c,n,l,a){return Object(o["v"])(),Object(o["d"])("div",v,[Object(o["h"])("div",w,[Object(o["h"])("div",y,[Object(o["h"])("div",P,[Object(o["h"])("h5",k,[c.propsProduct.title?(Object(o["v"])(),Object(o["d"])("span",U,"編輯商品")):(Object(o["v"])(),Object(o["d"])("span",x,"新增商品"))]),M]),Object(o["h"])("div",C,[Object(o["h"])("div",N,[Object(o["h"])("div",$,[Object(o["h"])("div",D,[Object(o["h"])("div",I,[_,Object(o["N"])(Object(o["h"])("input",{id:"mainImageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.newProduct.imageUrl=t})},null,512),[[o["J"],l.newProduct.imageUrl,void 0,{trim:!0}]]),Object(o["h"])("img",{class:"img-fluid my-3 form-img",src:l.newProduct.imageUrl,alt:l.newProduct.title},null,8,["src","alt"])]),Object(o["h"])("div",null,[Object(o["h"])("label",J,[Object(o["h"])("input",{id:"upload_img",style:{display:"none"},type:"file",onChange:e[2]||(e[2]=function(){return a.uploadMainImgage&&a.uploadMainImgage.apply(a,arguments)})},null,32),V])])]),F,Array.isArray(l.newProduct.imagesUrl)?(Object(o["v"])(),Object(o["d"])("div",A,[(Object(o["v"])(!0),Object(o["d"])(o["a"],null,Object(o["B"])(l.newProduct.imagesUrl,(function(t,c){return Object(o["v"])(),Object(o["d"])("div",{class:"mb-4",key:"addImage"+c},[S,Object(o["h"])("div",L,[Object(o["h"])("label",{class:"text-light bg-secondary mb-2 py-1 px-2",for:"subImageUrl-"+c},"請輸入副圖片 "+Object(o["F"])(c+1)+" 的網址",9,["for"]),Object(o["N"])(Object(o["h"])("input",{id:"subImageUrl-"+c,type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(t){return l.newProduct.imagesUrl[c]=t}},null,8,["id","onUpdate:modelValue"]),[[o["J"],l.newProduct.imagesUrl[c]]]),Object(o["h"])("img",{class:"img-fluid my-3 form-img",src:t,alt:""},null,8,["src"]),Object(o["h"])("div",null,[Object(o["h"])("label",B,[Object(o["h"])("input",{id:"upload_img",style:{display:"none"},type:"file",onChange:e[3]||(e[3]=function(){return a.uploadSubImgage&&a.uploadSubImgage.apply(a,arguments)})},null,32),G])]),Object(o["h"])("div",E,[Object(o["h"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:function(t){return l.newProduct.imagesUrl.splice(c,1)}}," 刪除圖片 ",8,["onClick"])])])])})),128)),!l.newProduct.imagesUrl.length||l.newProduct.imagesUrl[l.newProduct.imagesUrl.length-1]?(Object(o["v"])(),Object(o["d"])("div",T,[Object(o["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(t){return l.newProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(o["e"])("",!0)])):(Object(o["v"])(),Object(o["d"])("div",q,[Object(o["h"])("div",z,[Object(o["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[5]||(e[5]=function(){return a.createImages&&a.createImages.apply(a,arguments)})}," 新增圖片 ")])]))]),Object(o["h"])("div",H,[Object(o["h"])("div",K,[Q,Object(o["N"])(Object(o["h"])("input",{id:"title",type:"text",class:"form-control mt-1",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.newProduct.title=t})},null,512),[[o["J"],l.newProduct.title,void 0,{trim:!0}]])]),Object(o["h"])("div",R,[Object(o["h"])("div",W,[X,Object(o["N"])(Object(o["h"])("input",{id:"category",type:"text",class:"form-control mt-1",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.newProduct.category=t})},null,512),[[o["J"],l.newProduct.category]])]),Object(o["h"])("div",Y,[Z,Object(o["N"])(Object(o["h"])("input",{id:"unit",type:"text",class:"form-control mt-1",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.newProduct.unit=t})},null,512),[[o["J"],l.newProduct.unit]])])]),Object(o["h"])("div",tt,[Object(o["h"])("div",et,[ct,Object(o["N"])(Object(o["h"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=function(t){return l.newProduct.origin_price=t})},null,512),[[o["J"],l.newProduct.origin_price,void 0,{number:!0}]])]),Object(o["h"])("div",ot,[nt,Object(o["N"])(Object(o["h"])("input",{id:"price",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=function(t){return l.newProduct.price=t})},null,512),[[o["J"],l.newProduct.price,void 0,{number:!0}]])])]),lt,Object(o["h"])("div",at,[rt,Object(o["N"])(Object(o["h"])("textarea",{id:"description",type:"text",class:"form-control mt-1",placeholder:"請輸入商品描述",rows:"6","onUpdate:modelValue":e[11]||(e[11]=function(t){return l.newProduct.description=t})},"\r\n                ",512),[[o["J"],l.newProduct.description,void 0,{trim:!0}]])]),Object(o["h"])("div",it,[dt,Object(o["N"])(Object(o["h"])("textarea",{id:"content",type:"text",class:"form-control mt-1",placeholder:"請輸入商品規格",rows:"4","onUpdate:modelValue":e[12]||(e[12]=function(t){return l.newProduct.content=t})},"\r\n                ",512),[[o["J"],l.newProduct.content,void 0,{trim:!0}]])]),st,Object(o["h"])("div",ut,[bt,Object(o["N"])(Object(o["h"])("input",{id:"stuck",type:"number",min:"0",class:"form-control mt-1",placeholder:"請輸入庫存量","onUpdate:modelValue":e[13]||(e[13]=function(t){return l.newProduct.stuck=t})},null,512),[[o["J"],l.newProduct.stuck,void 0,{number:!0}]])]),Object(o["h"])("div",pt,[Object(o["h"])("div",ht,[Object(o["N"])(Object(o["h"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[14]||(e[14]=function(t){return l.newProduct.is_enabled=t})},null,512),[[o["I"],l.newProduct.is_enabled]]),mt])])])])]),Object(o["h"])("div",jt,[Ot,Object(o["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[15]||(e[15]=function(e){return t.$emit("update-product",c.propsProduct)})}," 確認 ")])])])],512)}var gt=c("8edb"),vt={props:{propsProduct:{type:Object,default:function(){return{}}}},methods:{createImages:function(){this.newProduct.imagesUrl=[""]},uploadMainImgage:function(t){var e=this;console.dir(t);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/upload"),o=t.target.files[0],n=new FormData;n.append("file-to-upload",o),this.$http.post(c,n).then((function(t){console.log(t),e.newProduct.imageUrl=t.data.imageUrl})).catch((function(t){console.log(t)}))},uploadSubImgage:function(t){var e=this;console.dir(t);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/upload"),o=t.target.files[0],n=new FormData;n.append("file-to-upload",o),this.$http.post(c,n).then((function(t){console.log(t),e.newProduct.imagesUrl[e.newProduct.imagesUrl.length-1]=t.data.imageUrl})).catch((function(t){console.log(t)}))}},data:function(){return{modal:"",newProduct:[]}},watch:{propsProduct:function(){this.newProduct=this.propsProduct}},mixins:[gt["a"]]};vt.render=ft;var wt=vt,yt={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Pt={class:"modal-dialog modal-dialog-centered"},kt={class:"modal-content border-0"},Ut=Object(o["h"])("div",{class:"modal-header bg-danger text-white"},[Object(o["h"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["h"])("span",null,"刪除商品")]),Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),xt={class:"modal-body"},Mt=Object(o["g"])(" 是否刪除 "),Ct={class:"text-danger"},Nt=Object(o["g"])(" 商品(刪除後將無法恢復)。 "),$t={class:"modal-footer"},Dt=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function It(t,e,c,n,l,a){return Object(o["v"])(),Object(o["d"])("div",yt,[Object(o["h"])("div",Pt,[Object(o["h"])("div",kt,[Ut,Object(o["h"])("div",xt,[Mt,Object(o["h"])("strong",Ct,Object(o["F"])(c.propsProduct.title),1),Nt]),Object(o["h"])("div",$t,[Dt,Object(o["h"])("button",{onClick:e[1]||(e[1]=function(e){return t.$emit("delete-product",c.propsProduct)}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var _t={props:{propsProduct:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mixins:[gt["a"]]};_t.render=It;var Jt=_t,Vt={data:function(){return{isNew:!0,products:[],allproductsNum:"",tempProduct:{imagesUrl:[]},pagination:{}}},components:{Pagination:g["a"],AdminProductModal:wt,DelProductModal:Jt},mounted:function(){console.clear(),this.getData()},methods:{showAlert:function(t){this.$swal(t.data.message)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination.current_page||1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){if(e.data.success){var c=e.data,o=c.products,n=c.pagination;t.products=o,t.pagination=n,console.log(t.products),t.getAllproducts()}})).catch((function(t){console.log(t)}))},getAllproducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/products/all");this.$http.get(e).then((function(e){t.allproductsNum=Object.values(e.data.products)})).catch((function(t){console.log(t)}))},deleteProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){t.$refs.adminDelModal.closeModal(),t.showAlert(e),console.log(e.data),t.getData()})).catch((function(t){console.log(t)}))},openModal:function(t,e){switch(t){case"new":this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.adminModal.openModal();break;case"edit":this.getData(),this.tempProduct=Object(f["a"])({},e),this.isNew=!1,this.$refs.adminModal.openModal();break;case"delete":this.tempProduct=Object(f["a"])({},e),this.$refs.adminDelModal.openModal();break;default:break}},updateProduct:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/product/"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/product/").concat(t.id),o="put"),this.$http[o](c,{data:t}).then((function(t){t.data.success?(e.$refs.adminModal.closeModal(),e.getData()):e.showAlert(t)})).catch((function(t){console.log(t)}))}}};Vt.render=O;e["default"]=Vt},a434:function(t,e,c){"use strict";var o=c("23e7"),n=c("23cb"),l=c("a691"),a=c("50c4"),r=c("7b0b"),i=c("65f0"),d=c("8418"),s=c("1dde"),u=s("splice"),b=Math.max,p=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var c,o,s,u,j,O,f=r(this),g=a(f.length),v=n(t,g),w=arguments.length;if(0===w?c=o=0:1===w?(c=0,o=g-v):(c=w-2,o=p(b(l(e),0),g-v)),g+c-o>h)throw TypeError(m);for(s=i(f,o),u=0;u<o;u++)j=v+u,j in f&&d(s,u,f[j]);if(s.length=o,c<o){for(u=v;u<g-o;u++)j=u+o,O=u+c,j in f?f[O]=f[j]:delete f[O];for(u=g;u>g-o+c;u--)delete f[u-1]}else if(c>o)for(u=g-o;u>v;u--)j=u+o-1,O=u+c-1,j in f?f[O]=f[j]:delete f[O];for(u=0;u<c;u++)f[u+v]=arguments[u+2];return f.length=g-o+c,s}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),n=c("83ab"),l=c("da84"),a=c("5135"),r=c("861d"),i=c("9bf2").f,d=c("e893"),s=l.Symbol;if(n&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new s(t):void 0===t?s():s(t);return""===t&&(u[e]=!0),e};d(b,s);var p=b.prototype=s.prototype;p.constructor=b;var h=p.toString,m="Symbol(test)"==String(s("test")),j=/^Symbol\((.*)\)[^)]+$/;i(p,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=h.call(t);if(a(u,t))return"";var c=m?e.slice(7,-1):e.replace(j,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-d1561c14.4c8c4543.js.map