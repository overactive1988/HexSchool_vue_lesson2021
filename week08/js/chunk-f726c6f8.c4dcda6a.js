(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f726c6f8"],{"1dde":function(t,e,c){var a=c("d039"),n=c("b622"),o=c("2d00"),s=n("species");t.exports=function(t){return o>=51||!a((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3d4f":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a?a.push(c):t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&(c?a.splice(a.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var a=t.get(e);a&&a.slice().map((function(t){t(c)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,c)}))}}},n=a();e["a"]=n},6034:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n={id:"main",class:"container-lg content content-user"},o=Object(a["h"])("h2",{class:"text-center pt-4"},"確認購物車",-1),s=Object(a["h"])("figure",{class:"my-5 text-center mx-auto"},[Object(a["h"])("img",{class:"img-fluid",src:"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1626638211897.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=cE9cq%2FuejGmjfshmJWikytVxp1UR98rJprDbTcN9R7qyaqv9AGb4Nxrt5eNf9naqv1a7MIc9wQmEUGPppvJv%2BjhHz9do1NAk5xS6EyIDOG1ZOY7E5JXOECmeXUgnDZy2W1hbBAyB0lIsASpoSW8H2AywjxzMYFE%2FHboUtkzswdjy5tDy07DBmpnAM9udZ6KRX8DxpBwZqhYNE9u18aFpNC5O3TXoafvGsgvOx7d%2B10siwv%2FlWYYPe925Q3eR67yfRHol3RSioPgSiIPE9t9l%2BQHRiKdzszK15bDfahZlDlDbnDyTf7gv0S0L7QhM5rj14j8ELLYCuy3%2FjFAhsAXPNA%3D%3D",alt:"step1 確認購物車"})],-1),l={class:"text-end mb-2"},i={key:0,class:"material-icons animate-spin"},r=Object(a["g"])(" 清空購物車 "),d={class:"p-table table align-middle"},u=Object(a["h"])("thead",{class:"p-table__head"},[Object(a["h"])("tr",{class:"text-light"},[Object(a["h"])("th",{width:"30%",class:"text-center fs-7 fs-sm-6"},"商品"),Object(a["h"])("th",{class:"p-table__th--num text-center fs-7 fs-sm-6"},"數量"),Object(a["h"])("th",{width:"20%",class:"text-end fs-7 fs-sm-6"},"小計"),Object(a["h"])("th",{width:"20%"})])],-1),b={class:"p-table__body"},p={key:0,class:"text-danger"},h={class:"p-table__foot"},f={class:"text-light"},j={colspan:"2"},O={key:0,class:"input-group mb-3 input-group-sm"},g={class:"input-group-append"},m={key:0,class:"material-icons animate-spin"},v=Object(a["g"])(" 套用優惠碼 "),y={key:0,colspan:"2",class:"text-end"},x={key:0},k={key:1,class:"text-end"},C={key:0},_={colspan:"4",class:"text-end text-light"},w={key:1,class:"text-center"},S={class:"d-flex justify-content-between mb-4"},I=Object(a["g"])("繼續購物"),N=Object(a["g"])("下一步");function A(t,e,c,A,D,F){var $,P,E=Object(a["C"])("UserCart"),q=Object(a["C"])("router-link");return Object(a["v"])(),Object(a["d"])("div",n,[o,s,D.cart.total>0?(Object(a["v"])(),Object(a["d"])(a["a"],{key:0},[Object(a["h"])("div",l,[Object(a["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return F.deleteCartAll&&F.deleteCartAll.apply(F,arguments)}),disabled:D.cart.carts<=1},[1===D.loadingStatus.loadingItem?(Object(a["v"])(),Object(a["d"])("span",i," cached ")):Object(a["e"])("",!0),r],8,["disabled"])]),Object(a["h"])("table",d,[u,Object(a["h"])("tbody",b,[D.cart.carts?(Object(a["v"])(),Object(a["d"])(E,{key:0,loading:D.loadingStatus,cartitem:D.cart,onDeleteCart:F.deleteCart,onAddProductNum:F.addProductNum,onCutProductNum:F.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(a["e"])("",!0),Object(a["h"])("tr",null,[Object(a["h"])("td",null,[this.message?(Object(a["v"])(),Object(a["d"])("span",p,Object(a["F"])(this.message),1)):Object(a["e"])("",!0)])])]),Object(a["h"])("tfoot",h,[Object(a["h"])("tr",f,[Object(a["h"])("td",j,[D.cart.final_total==D.cart.total?(Object(a["v"])(),Object(a["d"])("div",O,[Object(a["N"])(Object(a["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return D.coupon_code=t}),placeholder:"請輸入優惠碼",disabled:D.cart.final_total!==D.cart.total},null,8,["disabled"]),[[a["J"],D.coupon_code]]),Object(a["h"])("div",g,[Object(a["h"])("button",{class:"btn btn-sm btn-outline-light ms-2",type:"button",onClick:e[3]||(e[3]=function(t){return F.addCouponCode()}),disabled:D.cart.final_total!==D.cart.total},[3===D.loadingStatus.loadingItem?(Object(a["v"])(),Object(a["d"])("span",m," cached ")):Object(a["e"])("",!0),v],8,["disabled"])])])):Object(a["e"])("",!0)]),(null===($=D.cart)||void 0===$||null===(P=$.carts)||void 0===P?void 0:P.length)>=1?(Object(a["v"])(),Object(a["d"])("td",y,[D.cart.final_total!==D.cart.total?(Object(a["v"])(),Object(a["d"])("del",x," 總計： "+Object(a["F"])(t.$filters.currency(this.cart.total))+" NTD",1)):(Object(a["v"])(),Object(a["d"])(a["a"],{key:1},[Object(a["g"])("總計： "+Object(a["F"])(t.$filters.currency(this.cart.total))+" NTD",1)],64))])):(Object(a["v"])(),Object(a["d"])("td",k,"尚無商品"))]),D.cart.final_total!==D.cart.total?(Object(a["v"])(),Object(a["d"])("tr",C,[Object(a["h"])("td",_," 折扣價： "+Object(a["F"])(t.$filters.currency(D.cart.final_total))+" NTD ",1)])):Object(a["e"])("",!0)])])],64)):(Object(a["v"])(),Object(a["d"])("p",w,"請先將商品加入購物車")),Object(a["h"])("div",S,[Object(a["h"])(q,{class:"btn btn-secondary",to:"/products"},{default:Object(a["M"])((function(){return[I]})),_:1}),Object(a["h"])(q,{class:["btn btn-primary",{disabled:D.cart.carts<=1}],"aria-disabled":D.cart.carts<=1,to:"/cartcheck"},{default:Object(a["M"])((function(){return[N]})),_:1},8,["aria-disabled","class"])])])}c("99af");var D=c("3d4f"),F={class:"d-sm-flex align-items-center"},$={class:"ps-sm-2"},P={class:"badge bg-primary"},E={class:"fs-7 fs-sm-6 mb-1"},q={key:0,class:"badge bg-success fs-8 fs-sm-7"},T={class:"input-group"},B={class:"input-group input-group-sm text-center mb-3 w-75 mx-auto"},M=Object(a["h"])("span",null,"-",-1),U={class:"form-control m-0 fs-7 fs-sm-6"},z=Object(a["h"])("span",null,"+",-1),J={class:"text-end fs-7 fs-sm-6"},R={key:0,class:"text-success"},G=Object(a["h"])("br",null,null,-1),Y={class:"text-dark"},H={class:"text-end"},X={key:0,class:"material-icons animate-spin"},Z=Object(a["g"])(" 刪除 ");function Q(t,e,c,n,o,s){var l=Object(a["C"])("router-link");return Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["B"])(c.cartitem.carts,(function(e){return Object(a["v"])(),Object(a["d"])("tr",{key:e.id},[Object(a["h"])("td",null,[Object(a["h"])(l,{class:"p-table__link text-decoration-none",to:"/product/".concat(e.product.id)},{default:Object(a["M"])((function(){return[Object(a["h"])("figure",F,[Object(a["h"])("img",{class:"product-img d-none d-sm-block",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"]),Object(a["h"])("figcaption",$,[Object(a["h"])("span",P,Object(a["F"])(e.product.category),1),Object(a["h"])("p",E,Object(a["F"])(e.product.title),1),e.coupon?(Object(a["v"])(),Object(a["d"])("div",q," 已套用優惠券 ")):Object(a["e"])("",!0)])])]})),_:2},1032,["to"])]),Object(a["h"])("td",null,[Object(a["h"])("div",T,[Object(a["h"])("div",B,[Object(a["h"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[M],10,["onClick","disabled"]),Object(a["h"])("p",U,Object(a["F"])(e.qty),1),Object(a["h"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[z],8,["onClick","disabled"])])])]),Object(a["h"])("td",J,[e.final_total!==e.total?(Object(a["v"])(),Object(a["d"])("small",R,[Object(a["g"])("折扣價："+Object(a["F"])(t.$filters.currency(e.final_total))+" NTD",1),G,Object(a["h"])("del",Y,Object(a["F"])(t.$filters.currency(e.total))+" NTD",1)])):(Object(a["v"])(),Object(a["d"])(a["a"],{key:1},[Object(a["g"])(Object(a["F"])(t.$filters.currency(e.total))+" NTD",1)],64))]),Object(a["h"])("td",H,[Object(a["h"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-danger btn-sm fs-7 fs-sm-6"},[c.loading.loadingItem===e.id?(Object(a["v"])(),Object(a["d"])("span",X," cached ")):Object(a["e"])("",!0),Z],8,["onClick"])])])})),128)}var W={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};W.render=Q;var K=W,L={data:function(){return{loadingStatus:{loadingItem:""},cart:"",coupon_code:"",message:""}},components:{UserCart:K},methods:{showAlert:function(t){this.$swal(t.data.message)},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,D["a"].emit("update-cart"),console.log(t.cart))})).catch((function(t){console.log(t)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){console.log(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addCouponCode:function(){var t=this;this.loadingStatus.loadingItem=3;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.loadingStatus.loadingItem="",t.showAlert(e),t.coupon_code="",t.message="",t.getCart()):(t.coupon_code="",t.loadingStatus.loadingItem="",console.log(e),t.message=e.data.message)})).catch((function(t){console.log(t)}))}},mounted:function(){console.clear(),this.getCart()}};L.render=A;e["default"]=L},8418:function(t,e,c){"use strict";var a=c("c04e"),n=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var s=a(e);s in t?n.f(t,s,o(0,c)):t[s]=c}},"99af":function(t,e,c){"use strict";var a=c("23e7"),n=c("d039"),o=c("e8b5"),s=c("861d"),l=c("7b0b"),i=c("50c4"),r=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),h=b("isConcatSpreadable"),f=9007199254740991,j="Maximum allowed index exceeded",O=p>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=u("concat"),m=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},v=!O||!g;a({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,a,n,o,s=l(this),u=d(s,0),b=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?s:arguments[e],m(o)){if(n=i(o.length),b+n>f)throw TypeError(j);for(c=0;c<n;c++,b++)c in o&&r(u,b,o[c])}else{if(b>=f)throw TypeError(j);r(u,b++,o)}return u.length=b,u}})}}]);
//# sourceMappingURL=chunk-f726c6f8.c4dcda6a.js.map