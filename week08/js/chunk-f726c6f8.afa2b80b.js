(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f726c6f8"],{"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),i=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3d4f":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a},6034:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"container content mt-4"},o=Object(n["h"])("h1",{class:"text-center"},"購物車",-1),i={class:"text-end mb-2"},r={key:0,class:"material-icons animate-spin"},d=Object(n["g"])(" 清空購物車 "),l={class:"table align-middle"},s=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{width:"5%"}),Object(n["h"])("th",{width:"10%"},"縮圖"),Object(n["h"])("th",{width:"10%"},"類別"),Object(n["h"])("th",{width:"15%"},"品名"),Object(n["h"])("th",{width:"15%"},"數量"),Object(n["h"])("th",{width:"10%",class:"text-end"},"單價"),Object(n["h"])("th",{width:"12%",class:"text-end"},"合計")])],-1),u=Object(n["h"])("td",{colspan:"6",class:"text-end"},"總計",-1),b={key:0,class:"text-end"},h={key:1,class:"text-end"},p={class:"d-flex justify-content-between mb-4"},f=Object(n["g"])("繼續購物"),j=Object(n["g"])("下一步");function O(t,e,c,O,g,m){var v,y,C=Object(n["C"])("UserCart"),x=Object(n["C"])("router-link");return Object(n["v"])(),Object(n["d"])("div",a,[o,Object(n["h"])("div",i,[Object(n["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return m.deleteCartAll&&m.deleteCartAll.apply(m,arguments)}),disabled:g.cart.carts<=1},[1===g.loadingStatus.loadingItem?(Object(n["v"])(),Object(n["d"])("span",r," cached ")):Object(n["e"])("",!0),d],8,["disabled"])]),Object(n["h"])("table",l,[s,Object(n["h"])("tbody",null,[g.cart.carts?(Object(n["v"])(),Object(n["d"])(C,{key:0,loading:g.loadingStatus,cartitem:g.cart,onDeleteCart:m.deleteCart,onAddProductNum:m.addProductNum,onCutProductNum:m.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(n["e"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[u,(null===(v=g.cart)||void 0===v||null===(y=v.carts)||void 0===y?void 0:y.length)>=1?(Object(n["v"])(),Object(n["d"])("td",b,Object(n["F"])(t.$filters.currency(this.cart.total)),1)):(Object(n["v"])(),Object(n["d"])("td",h,"尚無商品"))])])]),Object(n["h"])("div",p,[Object(n["h"])(x,{class:"btn btn-secondary",to:"/products"},{default:Object(n["M"])((function(){return[f]})),_:1}),Object(n["h"])(x,{class:["btn btn-primary",{disabled:g.cart.carts<=1}],"aria-disabled":g.cart.carts<=1,to:"/cartcheck"},{default:Object(n["M"])((function(){return[j]})),_:1},8,["aria-disabled","class"])])])}c("99af");var g=c("3d4f"),m={key:0,class:"material-icons animate-spin"},v=Object(n["g"])(" x "),y={class:"input-group input-group-sm"},C={class:"input-group text-center mb-3"},x=Object(n["h"])("span",null,"-",-1),w={class:"form-control m-0"},k=Object(n["h"])("span",null,"+",-1),I={class:"text-end"},S={class:"text-end"},$={class:"text-success"};function A(t,e,c,a,o,i){return Object(n["v"])(!0),Object(n["d"])(n["a"],null,Object(n["B"])(c.cartitem.carts,(function(e){return Object(n["v"])(),Object(n["d"])("tr",{key:e.id},[Object(n["h"])("td",null,[Object(n["h"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-danger btn-sm"},[c.loading.loadingItem===e.id?(Object(n["v"])(),Object(n["d"])("span",m," cached ")):Object(n["e"])("",!0),v],8,["onClick"])]),Object(n["h"])("td",null,[Object(n["h"])("img",{class:"product-img",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"])]),Object(n["h"])("td",null,Object(n["F"])(e.product.category),1),Object(n["h"])("td",null,Object(n["F"])(e.product.title),1),Object(n["h"])("td",null,[Object(n["h"])("div",y,[Object(n["h"])("div",C,[Object(n["h"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[x],10,["onClick","disabled"]),Object(n["h"])("p",w,Object(n["F"])(e.qty),1),Object(n["h"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[k],8,["onClick","disabled"])])])]),Object(n["h"])("td",I,Object(n["F"])(t.$filters.currency(e.product.price)),1),Object(n["h"])("td",S,[Object(n["h"])("small",$,"價格："+Object(n["F"])(t.$filters.currency(e.total)),1)])])})),128)}var N={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};N.render=A;var P=N,q={data:function(){return{loadingStatus:{loadingItem:""},cart:""}},components:{UserCart:P},methods:{showAlert:function(t){this.$swal(t.data.message)},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,g["a"].emit("update-cart"),console.log(t.cart))})).catch((function(t){console.log(t)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){console.log(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(n,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(n,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))}},mounted:function(){console.clear(),this.getCart()}};q.render=O;e["default"]=q},8418:function(t,e,c){"use strict";var n=c("c04e"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var i=n(e);i in t?a.f(t,i,o(0,c)):t[i]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),i=c("861d"),r=c("7b0b"),d=c("50c4"),l=c("8418"),s=c("65f0"),u=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),f=9007199254740991,j="Maximum allowed index exceeded",O=h>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=u("concat"),m=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},v=!O||!g;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,n,a,o,i=r(this),u=s(i,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?i:arguments[e],m(o)){if(a=d(o.length),b+a>f)throw TypeError(j);for(c=0;c<a;c++,b++)c in o&&l(u,b,o[c])}else{if(b>=f)throw TypeError(j);l(u,b++,o)}return u.length=b,u}})}}]);
//# sourceMappingURL=chunk-f726c6f8.afa2b80b.js.map