(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a2c8d19"],{"3d4f":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a?a.push(c):t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&(c?a.splice(a.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var a=t.get(e);a&&a.slice().map((function(t){t(c)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,c)}))}}},o=a();e["a"]=o},6034:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),o={id:"main",class:"container-lg content"},n=Object(a["createVNode"])("h2",{class:"pt-4 text-light"},"確認購物車",-1),r={class:"bg-light my-3 my-sm-5 p-4"},s=Object(a["createVNode"])("figure",{class:"mt-0 mb-3 my-sm-5 text-center mx-auto"},[Object(a["createVNode"])("img",{class:"img-fluid",src:"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1626638211897.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=cE9cq%2FuejGmjfshmJWikytVxp1UR98rJprDbTcN9R7qyaqv9AGb4Nxrt5eNf9naqv1a7MIc9wQmEUGPppvJv%2BjhHz9do1NAk5xS6EyIDOG1ZOY7E5JXOECmeXUgnDZy2W1hbBAyB0lIsASpoSW8H2AywjxzMYFE%2FHboUtkzswdjy5tDy07DBmpnAM9udZ6KRX8DxpBwZqhYNE9u18aFpNC5O3TXoafvGsgvOx7d%2B10siwv%2FlWYYPe925Q3eR67yfRHol3RSioPgSiIPE9t9l%2BQHRiKdzszK15bDfahZlDlDbnDyTf7gv0S0L7QhM5rj14j8ELLYCuy3%2FjFAhsAXPNA%3D%3D",alt:"step1 確認購物車"})],-1),l={class:"text-end mb-2"},i={key:0,class:"material-icons animate-spin"},d=Object(a["createTextVNode"])(" 清空購物車 "),u={class:"p-table table align-middle"},b=Object(a["createVNode"])("thead",{class:"p-table__head"},[Object(a["createVNode"])("tr",{class:"text-light"},[Object(a["createVNode"])("th",{width:"30%",class:"text-center fs-7 fs-sm-6"},"商品"),Object(a["createVNode"])("th",{class:"p-table__th--num text-center fs-7 fs-sm-6"},"數量"),Object(a["createVNode"])("th",{width:"20%",class:"text-end fs-7 fs-sm-6"},"小計"),Object(a["createVNode"])("th",{width:"20%"})])],-1),p={class:"p-table__body"},m={key:0,class:"text-danger"},j={class:"p-table__foot"},O={class:"text-light"},g={colspan:"2"},f={key:0,class:"input-group mb-3 input-group-sm"},h={class:"input-group-append"},N={key:0,class:"material-icons animate-spin"},k=Object(a["createTextVNode"])(" 套用優惠碼 "),y={key:0,colspan:"2",class:"text-end"},V={key:0},v={key:1,class:"text-end"},x={key:0},B={colspan:"4",class:"text-end text-light"},C={class:"d-flex justify-content-between mb-4"},S=Object(a["createTextVNode"])("繼續購物"),D=Object(a["createTextVNode"])("下一步"),w={key:1,class:"row"},_={class:"col-12 col-md-6"},I={class:"mx-auto position-relative"},A=Object(a["createVNode"])("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1627713231125.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=KA109n1zVjPEbxfGqLQLXvS8BDx%2By653lSnylXeUDyf7%2BI8SboUVFMz4GWYfvMuXWIBqyR2h3r2MkO3D2a1ZYFFi9Woqep1VI4t2hovPJLG0yHpFat0zzZfYZLC%2B5N%2B89AuTqMlPFsqBpy80GBkcOP0DNyjxmNz1lGaFYwMd3IhQk8kncQdDyHWKveZgd67HT4kyk3YyhaCoA9LWHmUyWfQzUHqYnLxknpm%2FSdyqeLFO6itKEhTVJgIGoAzRwrNtKnnSNKBD%2BbLgBVKQdpp15SukuChXCRdUyev0%2BmutlX%2FN5sSYPM1StGheiypaEa2HyjyvB6qL7wYoY6%2FMLqkNAQ%3D%3D",alt:"請先將商品加入購物車",class:"img-fluid"},null,-1),F={class:"col-12 col-md-6 d-flex flex-wrap"},T={class:"nav-products w-100"},q=Object(a["createVNode"])("p",{class:"h3"},"選擇商品類別",-1),P={class:"nav-products__lists cart-list mt-3","data-aos":"fade-up","data-aos-easing":"linear","data-aos-duration":"600"},$={class:"nav-products__list"},z=Object(a["createVNode"])("span",null,"所有商品",-1),L={class:"mt-auto d-flex justify-content-end mb-4 w-100"},M=Object(a["createTextVNode"])("繼續購物");function Y(t,e,c,Y,E,G){var U,H,Q=Object(a["resolveComponent"])("UserCart"),R=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])("main",o,[n,Object(a["createVNode"])("div",r,[E.cart.total>0?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[s,Object(a["createVNode"])("div",l,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return G.deleteCartAll&&G.deleteCartAll.apply(G,arguments)}),disabled:E.cart.carts<=1},[1===E.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",i," cached ")):Object(a["createCommentVNode"])("",!0),d],8,["disabled"])]),Object(a["createVNode"])("table",u,[b,Object(a["createVNode"])("tbody",p,[E.cart.carts?(Object(a["openBlock"])(),Object(a["createBlock"])(Q,{key:0,loading:E.loadingStatus,cartitem:E.cart,onDeleteCart:G.deleteCart,onAddProductNum:G.addProductNum,onCutProductNum:G.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",null,[this.message?(Object(a["openBlock"])(),Object(a["createBlock"])("span",m,Object(a["toDisplayString"])(this.message),1)):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])("tfoot",j,[Object(a["createVNode"])("tr",O,[Object(a["createVNode"])("td",g,[E.cart.final_total==E.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("div",f,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return E.coupon_code=t}),placeholder:"請輸入優惠碼",disabled:E.cart.final_total!==E.cart.total},null,8,["disabled"]),[[a["vModelText"],E.coupon_code]]),Object(a["createVNode"])("div",h,[Object(a["createVNode"])("button",{class:"btn btn-sm btn-outline-light ms-2",type:"button",onClick:e[3]||(e[3]=function(t){return G.addCouponCode()}),disabled:E.cart.final_total!==E.cart.total},[3===E.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",N," cached ")):Object(a["createCommentVNode"])("",!0),k],8,["disabled"])])])):Object(a["createCommentVNode"])("",!0)]),(null===(U=E.cart)||void 0===U||null===(H=U.carts)||void 0===H?void 0:H.length)>=1?(Object(a["openBlock"])(),Object(a["createBlock"])("td",y,[E.cart.final_total!==E.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("del",V," 總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)],64))])):(Object(a["openBlock"])(),Object(a["createBlock"])("td",v,"尚無商品"))]),E.cart.final_total!==E.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",x,[Object(a["createVNode"])("td",B," 折扣價： "+Object(a["toDisplayString"])(t.$filters.currency(E.cart.final_total))+" NTD ",1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",C,[Object(a["createVNode"])(R,{class:"btn btn-secondary",to:"/products"},{default:Object(a["withCtx"])((function(){return[S]})),_:1}),Object(a["createVNode"])(R,{class:["btn btn-primary",{disabled:E.cart.carts<=1}],"aria-disabled":E.cart.carts<=1,to:"/cartcheck"},{default:Object(a["withCtx"])((function(){return[D]})),_:1},8,["aria-disabled","class"])])],64)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",w,[Object(a["createVNode"])("div",_,[Object(a["createVNode"])("p",I,[Object(a["createVNode"])(R,{class:"stretched-link",to:"/products"},{default:Object(a["withCtx"])((function(){return[A]})),_:1})])]),Object(a["createVNode"])("div",F,[Object(a["createVNode"])("nav",T,[q,Object(a["createVNode"])("ul",P,[Object(a["createVNode"])("li",$,[Object(a["createVNode"])("a",{href:"#","aria-current":"true",onClick:e[4]||(e[4]=Object(a["withModifiers"])((function(t){return G.clickCategory()}),["prevent"]))},[z])]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(this.category,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.name,class:"nav-products__list"},[Object(a["createVNode"])("a",{href:"#","aria-current":"true",onClick:Object(a["withModifiers"])((function(e){return G.clickCategory(t.name)}),["prevent"])},[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.name),1)],8,["onClick"])])})),128))])]),Object(a["createVNode"])("div",L,[Object(a["createVNode"])(R,{class:"btn btn-secondary",to:"/products"},{default:Object(a["withCtx"])((function(){return[M]})),_:1})])])]))])])}c("99af");var E=c("3d4f"),G={class:"d-sm-flex align-items-center"},U={class:"ps-sm-2"},H={class:"badge bg-primary"},Q={class:"fs-7 fs-sm-6 mb-1"},R={key:0,class:"badge bg-success fs-8 fs-sm-7"},W={class:"input-group"},X={class:"input-group input-group-sm text-center mb-3 w-75 mx-auto"},K=Object(a["createVNode"])("span",null,"-",-1),Z={class:"form-control m-0 fs-7 fs-sm-6"},J=Object(a["createVNode"])("span",null,"+",-1),tt={class:"text-end fs-7 fs-sm-6"},et={key:0,class:"text-success"},ct=Object(a["createVNode"])("br",null,null,-1),at={class:"text-dark"},ot={class:"text-end"},nt={key:0,class:"material-icons animate-spin"},rt=Object(a["createTextVNode"])(" 刪除 ");function st(t,e,c,o,n,r){var s=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.cartitem.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])(s,{class:"p-table__link text-decoration-none",to:"/product/".concat(e.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("figure",G,[Object(a["createVNode"])("img",{class:"product-img d-none d-sm-block",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"]),Object(a["createVNode"])("figcaption",U,[Object(a["createVNode"])("span",H,Object(a["toDisplayString"])(e.product.category),1),Object(a["createVNode"])("p",Q,Object(a["toDisplayString"])(e.product.title),1),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",R," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)])])]})),_:2},1032,["to"])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",W,[Object(a["createVNode"])("div",X,[Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[K],10,["onClick","disabled"]),Object(a["createVNode"])("p",Z,Object(a["toDisplayString"])(e.qty),1),Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[J],8,["onClick","disabled"])])])]),Object(a["createVNode"])("td",tt,[e.final_total!==e.total?(Object(a["openBlock"])(),Object(a["createBlock"])("small",et,[Object(a["createTextVNode"])("折扣價："+Object(a["toDisplayString"])(t.$filters.currency(e.final_total))+" NTD",1),ct,Object(a["createVNode"])("del",at,Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)],64))]),Object(a["createVNode"])("td",ot,[Object(a["createVNode"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-danger btn-sm fs-7 fs-sm-6"},[c.loading.loadingItem===e.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",nt," cached ")):Object(a["createCommentVNode"])("",!0),rt],8,["onClick"])])])})),128)}var lt={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};lt.render=st;var it=lt,dt={data:function(){return{loadingStatus:{loadingItem:""},cart:"",coupon_code:"",message:"",category:[{name:"諾貝塔"},{name:"塔妮亞"},{name:"莫妮卡"},{name:"其他周邊"}]}},components:{UserCart:it},methods:{showAlert:function(t){this.$swal(t.data.message)},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,E["a"].emit("update-cart"))})).catch((function(t){console.log(t)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){console.log(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addCouponCode:function(){var t=this;this.loadingStatus.loadingItem=3;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.loadingStatus.loadingItem="",t.showAlert(e),t.coupon_code="",t.message="",t.getCart()):(t.coupon_code="",t.loadingStatus.loadingItem="",t.message=e.data.message)})).catch((function(t){console.log(t)}))},clickCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";E["a"].emit("categoryTop",t),this.$router.push("/products/")}},mounted:function(){console.clear(),this.getCart()}};dt.render=Y;e["default"]=dt},b0c0:function(t,e,c){var a=c("83ab"),o=c("9bf2").f,n=Function.prototype,r=n.toString,s=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&o(n,l,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-3a2c8d19.6ed19756.js.map