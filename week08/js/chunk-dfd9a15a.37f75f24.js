(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfd9a15a"],{"860c":function(e,t,l){"use strict";l.r(t);l("b0c0");var d=l("7a23"),c={class:"container content"},a=Object(d["h"])("h1",{class:"text-center"},"訂單列表",-1),r={class:"d-flex justify-content-center mt-5"},n={class:"table align-middle mt-4"},s=Object(d["h"])("thead",null,[Object(d["h"])("tr",null,[Object(d["h"])("th",{width:"8%"},"訂單日期"),Object(d["h"])("th",{width:"9%"},"客戶姓名"),Object(d["h"])("th",{width:"10%"},"客戶信箱"),Object(d["h"])("th",{width:"10%"},"客戶電話"),Object(d["h"])("th",{width:"18%"},"客戶地址"),Object(d["h"])("th",{width:"11%"},"訂單總價"),Object(d["h"])("th",{class:"text-end",width:"9%"},"付款狀態"),Object(d["h"])("th",{width:"12%"})])],-1),o={class:"h5"},i={class:"text-end"},b={key:0,class:"text-success"},O={key:1,class:"text-muted"},h={class:"text-end"},u={class:"btn-group"},j={key:0,class:"material-icons animate-spin"},p=Object(d["g"])(" 刪除 "),m={colspan:"8",class:"text-end"},f={key:0,class:"material-icons animate-spin"},g=Object(d["g"])(" 刪除所有訂單 "),v={class:"d-flex justify-content-center mt-5"};function y(e,t,l,y,x,k){var M=Object(d["C"])("Pagination"),w=Object(d["C"])("AdminOrderModal"),F=Object(d["C"])("DelOrdersModal"),$=Object(d["C"])("DelAllOrders");return Object(d["v"])(),Object(d["d"])("div",c,[a,Object(d["h"])("div",r,[Object(d["h"])(M,{page:x.pagination,onGetProduct:k.getOrder},null,8,["page","onGetProduct"])]),Object(d["h"])("table",n,[s,Object(d["h"])("tbody",null,[(Object(d["v"])(!0),Object(d["d"])(d["a"],null,Object(d["B"])(x.orders,(function(t){return Object(d["v"])(),Object(d["d"])("tr",{class:"align-middle",key:t.id},[Object(d["h"])("td",null,Object(d["F"])(e.$filters.date(t.create_at)),1),Object(d["h"])("td",null,Object(d["F"])(t.user.name),1),Object(d["h"])("td",null,Object(d["F"])(t.user.email),1),Object(d["h"])("td",null,Object(d["F"])(t.user.tel),1),Object(d["h"])("td",null,Object(d["F"])(t.user.address),1),Object(d["h"])("td",null,[Object(d["h"])("div",o,Object(d["F"])(e.$filters.currency(t.total))+" 元",1)]),Object(d["h"])("td",i,[t.is_paid?(Object(d["v"])(),Object(d["d"])("strong",b,"已付款")):(Object(d["v"])(),Object(d["d"])("span",O,"未付款"))]),Object(d["h"])("td",h,[Object(d["h"])("div",u,[Object(d["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return k.openModal("edit",t)}}," 編輯 ",8,["onClick"]),Object(d["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return k.openModal("delete",t)}},[x.loadingStatus.loadingItem===t.id?(Object(d["v"])(),Object(d["d"])("span",j," cached ")):Object(d["e"])("",!0),p],8,["onClick"])])])])})),128))]),Object(d["h"])("tfoot",null,[Object(d["h"])("tr",null,[Object(d["h"])("td",m,[Object(d["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(t){return k.openModal("deleteall",e.item)}),disabled:x.orders<=1},[1===x.loadingStatus.loadingItem?(Object(d["v"])(),Object(d["d"])("span",f," cached ")):Object(d["e"])("",!0),g],8,["disabled"])])])])]),Object(d["h"])("div",v,[Object(d["h"])(M,{page:x.pagination,onGetProduct:k.getOrder},null,8,["page","onGetProduct"])]),Object(d["h"])(w,{ref:"adminOrderModal","edit-order":x.tempOrder,onUpdateOrder:k.updateOrder},null,8,["edit-order","onUpdateOrder"]),Object(d["h"])(F,{ref:"adminOrderDelModal","delete-order":x.tempOrder,onDeleteOrders:k.deleteOrder},null,8,["delete-order","onDeleteOrders"]),Object(d["h"])($,{ref:"adminAllOrderDelModal",onDeleteAllOrders:k.deleteAllOrders},null,8,["onDeleteAllOrders"])])}var x=l("5530"),k=(l("99af"),l("1799")),M={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"customerOrderModalLabel","aria-hidden":"true"},w={class:"modal-dialog modal-xl modal-dialog-centered"},F={class:"modal-content border-0"},$=Object(d["h"])("div",{class:"modal-header bg-primary text-white"},[Object(d["h"])("h5",{id:"customerOrderModalLabel",class:"modal-title"},[Object(d["h"])("span",null,"修改客戶訂單內容")]),Object(d["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),A={class:"modal-body"},C=Object(d["h"])("h3",{class:"text-primary"},"選購商品",-1),D={class:"px-3"},_={class:"table align-middle"},I=Object(d["h"])("thead",null,[Object(d["h"])("tr",null,[Object(d["h"])("th",null,"縮圖"),Object(d["h"])("th",null,"品名"),Object(d["h"])("th",null,"類別"),Object(d["h"])("th",null,"數量"),Object(d["h"])("th",{class:"text-end"},"單價"),Object(d["h"])("th",{class:"text-end"},"合計")])],-1),S={class:"text-end"},L={class:"text-end"},P={class:"row"},G={class:"col-md-4"},U=Object(d["h"])("h3",{class:"text-primary"},"用戶資料",-1),q={class:"table"},B={key:0},J=Object(d["h"])("th",{style:{width:"100px"}},"姓名",-1),T=Object(d["h"])("th",null,"Email",-1),E=Object(d["h"])("th",null,"電話",-1),N=Object(d["h"])("th",null,"地址",-1),V={class:"col-md-8"},z=Object(d["h"])("h3",{class:"text-primary"},"訂單細節",-1),H={class:"table"},K=Object(d["h"])("th",{style:{width:"100px"}},"訂單編號",-1),Q=Object(d["h"])("th",null,"下單時間",-1),R=Object(d["h"])("th",null,"付款時間",-1),W={key:0},X={key:1},Y=Object(d["h"])("th",null,"付款狀態",-1),Z={key:0,class:"text-success"},ee={key:1,class:"text-muted"},te=Object(d["h"])("th",null,"總金額",-1),le={class:"d-flex justify-content-end"},de={class:"form-check"},ce={class:"form-check-label",for:"flexCheckDefault"},ae={key:0},re={key:1},ne={class:"modal-footer"},se=Object(d["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function oe(e,t,l,c,a,r){return Object(d["v"])(),Object(d["d"])("div",M,[Object(d["h"])("div",w,[Object(d["h"])("div",F,[$,Object(d["h"])("div",A,[C,Object(d["h"])("div",D,[Object(d["h"])("table",_,[I,Object(d["h"])("tbody",null,[(Object(d["v"])(!0),Object(d["d"])(d["a"],null,Object(d["B"])(a.tempOrder.products,(function(t){return Object(d["v"])(),Object(d["d"])("tr",{key:t.id},[Object(d["h"])("th",null,[Object(d["h"])("img",{class:"product-img",src:t.product.imageUrl,alt:t.product.title},null,8,["src","alt"])]),Object(d["h"])("th",null,Object(d["F"])(t.product.title),1),Object(d["h"])("th",null,Object(d["F"])(t.product.category),1),Object(d["h"])("td",null,Object(d["F"])(t.qty)+" / "+Object(d["F"])(t.product.unit),1),Object(d["h"])("td",S,Object(d["F"])(e.$filters.currency(t.product.price)),1),Object(d["h"])("td",L,Object(d["F"])(e.$filters.currency(t.qty*t.product.price)),1)])})),128))])])]),Object(d["h"])("div",P,[Object(d["h"])("div",G,[U,Object(d["h"])("table",q,[a.tempOrder.user?(Object(d["v"])(),Object(d["d"])("tbody",B,[Object(d["h"])("tr",null,[J,Object(d["h"])("td",null,Object(d["F"])(a.tempOrder.user.name),1)]),Object(d["h"])("tr",null,[T,Object(d["h"])("td",null,Object(d["F"])(a.tempOrder.user.email),1)]),Object(d["h"])("tr",null,[E,Object(d["h"])("td",null,Object(d["F"])(a.tempOrder.user.tel),1)]),Object(d["h"])("tr",null,[N,Object(d["h"])("td",null,Object(d["F"])(a.tempOrder.user.address),1)])])):Object(d["e"])("",!0)])]),Object(d["h"])("div",V,[z,Object(d["h"])("table",H,[Object(d["h"])("tbody",null,[Object(d["h"])("tr",null,[K,Object(d["h"])("td",null,Object(d["F"])(a.tempOrder.id),1)]),Object(d["h"])("tr",null,[Q,Object(d["h"])("td",null,Object(d["F"])(e.$filters.date(a.tempOrder.create_at)),1)]),Object(d["h"])("tr",null,[R,Object(d["h"])("td",null,[a.tempOrder.paid_date?(Object(d["v"])(),Object(d["d"])("span",W,Object(d["F"])(e.$filters.date(a.tempOrder.paid_date)),1)):(Object(d["v"])(),Object(d["d"])("span",X,"尚無資訊"))])]),Object(d["h"])("tr",null,[Y,Object(d["h"])("td",null,[a.tempOrder.is_paid?(Object(d["v"])(),Object(d["d"])("strong",Z,"已付款")):(Object(d["v"])(),Object(d["d"])("span",ee,"尚未付款"))])]),Object(d["h"])("tr",null,[te,Object(d["h"])("td",null,Object(d["F"])(e.$filters.currency(a.tempOrder.total)),1)])])])]),Object(d["h"])("div",le,[Object(d["h"])("div",de,[Object(d["N"])(Object(d["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempOrder.is_paid=e}),onClick:t[2]||(t[2]=function(e){return r.paidTime()})},null,512),[[d["I"],a.tempOrder.is_paid]]),Object(d["h"])("label",ce,[a.tempOrder.is_paid?(Object(d["v"])(),Object(d["d"])("span",ae,"已付款")):(Object(d["v"])(),Object(d["d"])("span",re,"未付款"))])])])])]),Object(d["h"])("div",ne,[se,Object(d["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(t){return e.$emit("update-order",a.tempOrder)})}," 確認 ")])])])],512)}var ie=l("8edb"),be={emits:["update-order"],props:{editOrder:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{}}},methods:{paidTime:function(){this.tempOrder.paid_date?this.tempOrder.paid_date="":this.tempOrder.paid_date=Math.floor(Date.now()/1e3)}},watch:{editOrder:function(){this.tempOrder=this.editOrder}},mixins:[ie["a"]]};be.render=oe;var Oe=be,he={id:"delOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"},ue={class:"modal-dialog modal-dialog-centered"},je={class:"modal-content border-0"},pe=Object(d["h"])("div",{class:"modal-header bg-danger text-white"},[Object(d["h"])("h5",{id:"delOrderModalLabel",class:"modal-title"},[Object(d["h"])("span",null,"刪除單筆訂單")]),Object(d["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),me={key:0,class:"modal-body"},fe=Object(d["g"])(" 是否刪除 "),ge={class:"text-danger"},ve=Object(d["g"])(" 的訂單(刪除後將無法恢復)。 "),ye={class:"modal-footer"},xe=Object(d["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ke(e,t,l,c,a,r){return Object(d["v"])(),Object(d["d"])("div",he,[Object(d["h"])("div",ue,[Object(d["h"])("div",je,[pe,l.deleteOrder.id?(Object(d["v"])(),Object(d["d"])("div",me,[fe,Object(d["h"])("strong",ge,Object(d["F"])(l.deleteOrder.user.name),1),ve])):Object(d["e"])("",!0),Object(d["h"])("div",ye,[xe,Object(d["h"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("delete-orders",l.deleteOrder)}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var Me={props:{deleteOrder:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mixins:[ie["a"]]};Me.render=ke;var we=Me,Fe={id:"delAllOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAllOrderModalLabel","aria-hidden":"true"},$e={class:"modal-dialog modal-dialog-centered"},Ae={class:"modal-content border-0"},Ce=Object(d["f"])('<div class="modal-header bg-danger text-white"><h5 id="delAllOrderModalLabel" class="modal-title"><span>刪除全部訂單</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center"> 是否刪除所有訂單<br><strong class="text-danger fs-4">刪除後將無法復原</strong></div>',2),De={class:"modal-footer"},_e=Object(d["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ie(e,t,l,c,a,r){return Object(d["v"])(),Object(d["d"])("div",Fe,[Object(d["h"])("div",$e,[Object(d["h"])("div",Ae,[Ce,Object(d["h"])("div",De,[_e,Object(d["h"])("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("delete-all-orders")}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var Se={data:function(){return{modal:""}},mixins:[ie["a"]]};Se.render=Ie;var Le=Se,Pe={data:function(){return{loadingStatus:{loadingItem:""},orders:{},pagination:{},tempOrder:{}}},components:{Pagination:k["a"],AdminOrderModal:Oe,DelOrdersModal:we,DelAllOrders:Le},methods:{showAlert:function(e){this.$swal(e.data.message)},getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination.current_page||1,l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/orders?page=").concat(t,";");this.$http.get(l).then((function(t){if(t.data.success){var l=t.data,d=l.orders,c=l.pagination;e.orders=d,e.pagination=c,console.log(e.orders)}})).catch((function(e){console.log(e)}))},deleteOrder:function(e){var t=this;this.loadingStatus.loadingItem=e.id;var l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(e.id);this.$http.delete(l).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.$refs.adminOrderDelModal.closeModal(),t.showAlert(e),t.getOrder())})).catch((function(e){console.log(e)}))},deleteAllOrders:function(){var e=this;this.loadingStatus.loadingItem=1;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/orders/all");this.$http.delete(t).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.$refs.adminAllOrderDelModal.closeModal(),e.showAlert(t),e.getOrder())})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"edit":this.getOrder(),this.tempOrder=Object(x["a"])({},t),console.clear(),console.log(this.tempOrder),this.$refs.adminOrderModal.openModal();break;case"delete":this.tempOrder=Object(x["a"])({},t),this.$refs.adminOrderDelModal.openModal();break;case"deleteall":this.$refs.adminAllOrderDelModal.openModal();break;default:break}},updateOrder:function(e){var t=this,l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(e.id);this.$http.put(l,{data:e}).then((function(e){e.data.success?(t.$refs.adminOrderModal.closeModal(),t.getOrder()):t.showAlert(e)})).catch((function(e){console.log(e)}))}},created:function(){console.clear(),this.getOrder()}};Pe.render=y;t["default"]=Pe},b0c0:function(e,t,l){var d=l("83ab"),c=l("9bf2").f,a=Function.prototype,r=a.toString,n=/^\s*function ([^ (]*)/,s="name";d&&!(s in a)&&c(a,s,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-dfd9a15a.37f75f24.js.map