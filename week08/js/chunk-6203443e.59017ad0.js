(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6203443e"],{"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),s=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3d4f":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a},6034:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a=c("c40b"),o=c.n(a),s={class:"container-lg content mt-4"},r=Object(n["h"])("h1",{class:"text-center"},"確認購物車",-1),i=Object(n["h"])("figure",{class:"my-5 text-center mx-auto"},[Object(n["h"])("img",{class:"img-fluid",src:o.a,alt:"step1 確認購物車"})],-1),l={class:"text-end mb-2"},d={key:0,class:"material-icons animate-spin"},u=Object(n["g"])(" 清空購物車 "),b={class:"p-table table align-middle"},h=Object(n["h"])("thead",{class:"p-table__head"},[Object(n["h"])("tr",{class:"text-light"},[Object(n["h"])("th",{width:"30%",class:"text-center fs-7 fs-sm-6"},"商品"),Object(n["h"])("th",{class:"p-table__th--num text-center fs-7 fs-sm-6"},"數量"),Object(n["h"])("th",{width:"20%",class:"text-end fs-7 fs-sm-6"},"小計"),Object(n["h"])("th",{width:"20%"})])],-1),p={class:"p-table__body"},f={class:"p-table__foot"},g={class:"text-light"},j=Object(n["h"])("td",{colspan:"2",class:"text-end"},"總計",-1),O={key:0,colspan:"2",class:"text-end"},m={key:1,class:"text-end"},v={key:1,class:"text-center"},x={class:"d-flex justify-content-between mb-4"},y=Object(n["g"])("繼續購物"),C=Object(n["g"])("下一步");function k(t,e,c,a,o,k){var w,_,I=Object(n["C"])("UserCart"),S=Object(n["C"])("router-link");return Object(n["v"])(),Object(n["d"])("div",s,[r,i,o.cart.total>0?(Object(n["v"])(),Object(n["d"])(n["a"],{key:0},[Object(n["h"])("div",l,[Object(n["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(){return k.deleteCartAll&&k.deleteCartAll.apply(k,arguments)}),disabled:o.cart.carts<=1},[1===o.loadingStatus.loadingItem?(Object(n["v"])(),Object(n["d"])("span",d," cached ")):Object(n["e"])("",!0),u],8,["disabled"])]),Object(n["h"])("table",b,[h,Object(n["h"])("tbody",p,[o.cart.carts?(Object(n["v"])(),Object(n["d"])(I,{key:0,loading:o.loadingStatus,cartitem:o.cart,onDeleteCart:k.deleteCart,onAddProductNum:k.addProductNum,onCutProductNum:k.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(n["e"])("",!0)]),Object(n["h"])("tfoot",f,[Object(n["h"])("tr",g,[j,(null===(w=o.cart)||void 0===w||null===(_=w.carts)||void 0===_?void 0:_.length)>=1?(Object(n["v"])(),Object(n["d"])("td",O,Object(n["F"])(t.$filters.currency(this.cart.total))+" NTD ",1)):(Object(n["v"])(),Object(n["d"])("td",m,"尚無商品"))])])])],64)):(Object(n["v"])(),Object(n["d"])("p",v,"請先將商品加入購物車")),Object(n["h"])("div",x,[Object(n["h"])(S,{class:"btn btn-secondary",to:"/products"},{default:Object(n["M"])((function(){return[y]})),_:1}),Object(n["h"])(S,{class:["btn btn-primary",{disabled:o.cart.carts<=1}],"aria-disabled":o.cart.carts<=1,to:"/cartcheck"},{default:Object(n["M"])((function(){return[C]})),_:1},8,["aria-disabled","class"])])])}c("99af");var w=c("3d4f"),_={class:"d-sm-flex align-items-center"},I={class:"ps-2"},S={class:"badge bg-primary"},$={class:"fs-7 fs-sm-6"},N={class:"input-group"},A={class:"input-group input-group-sm text-center mb-3 w-75 mx-auto"},P=Object(n["h"])("span",null,"-",-1),q={class:"form-control m-0 fs-7 fs-sm-6"},F=Object(n["h"])("span",null,"+",-1),M={class:"text-end"},D={class:"text-success fs-7 fs-sm-6"},T={class:"text-end"},U={key:0,class:"material-icons animate-spin"},B=Object(n["g"])(" 刪除 ");function E(t,e,c,a,o,s){var r=Object(n["C"])("router-link");return Object(n["v"])(!0),Object(n["d"])(n["a"],null,Object(n["B"])(c.cartitem.carts,(function(e){return Object(n["v"])(),Object(n["d"])("tr",{key:e.id},[Object(n["h"])("td",null,[Object(n["h"])(r,{class:"p-table__link text-decoration-none",to:"/product/".concat(e.product.id)},{default:Object(n["M"])((function(){return[Object(n["h"])("figure",_,[Object(n["h"])("img",{class:"product-img d-none d-sm-block",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"]),Object(n["h"])("figcaption",I,[Object(n["h"])("span",S,Object(n["F"])(e.product.category),1),Object(n["h"])("p",$,Object(n["F"])(e.product.title),1)])])]})),_:2},1032,["to"])]),Object(n["h"])("td",null,[Object(n["h"])("div",N,[Object(n["h"])("div",A,[Object(n["h"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[P],10,["onClick","disabled"]),Object(n["h"])("p",q,Object(n["F"])(e.qty),1),Object(n["h"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[F],8,["onClick","disabled"])])])]),Object(n["h"])("td",M,[Object(n["h"])("small",D,Object(n["F"])(t.$filters.currency(e.total))+" NTD",1)]),Object(n["h"])("td",T,[Object(n["h"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-danger btn-sm fs-7 fs-sm-6"},[c.loading.loadingItem===e.id?(Object(n["v"])(),Object(n["d"])("span",U," cached ")):Object(n["e"])("",!0),B],8,["onClick"])])])})),128)}var J={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};J.render=E;var z=J,G={data:function(){return{loadingStatus:{loadingItem:""},cart:""}},components:{UserCart:z},methods:{showAlert:function(t){this.$swal(t.data.message)},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(t){console.log(t)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,w["a"].emit("update-cart"),console.log(t.cart))})).catch((function(t){console.log(t)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){console.log(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(n,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(n,c).then((function(t){console.log(t),t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){console.log(t)}))}},mounted:function(){console.clear(),this.getCart()}};G.render=k;e["default"]=G},8418:function(t,e,c){"use strict";var n=c("c04e"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var s=n(e);s in t?a.f(t,s,o(0,c)):t[s]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),s=c("861d"),r=c("7b0b"),i=c("50c4"),l=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",j=h>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),O=u("concat"),m=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},v=!j||!O;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,n,a,o,s=r(this),u=d(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],m(o)){if(a=i(o.length),b+a>f)throw TypeError(g);for(c=0;c<a;c++,b++)c in o&&l(u,b,o[c])}else{if(b>=f)throw TypeError(g);l(u,b++,o)}return u.length=b,u}})},c40b:function(t,e,c){t.exports=c.p+"img/cart_step01.bc41163f.png"}}]);
//# sourceMappingURL=chunk-6203443e.59017ad0.js.map