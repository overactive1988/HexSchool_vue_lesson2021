(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfd9a15a"],{"860c":function(t,e,c){"use strict";c.r(e);c("b0c0");var l=c("7a23"),a={class:"container"},d={class:"mt-4"},n=Object(l["h"])("h1",{class:"text-center"},"訂單列表",-1),r={class:"table align-middle mt-4"},s=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",{width:"8%"},"訂單日期"),Object(l["h"])("th",{width:"8%"},"客戶姓名"),Object(l["h"])("th",{width:"10%"},"客戶信箱"),Object(l["h"])("th",{width:"10%"},"客戶電話"),Object(l["h"])("th",{width:"18%"},"客戶地址"),Object(l["h"])("th",{width:"8%"},"訂單總價"),Object(l["h"])("th",{class:"text-end",width:"8%"},"付款狀態"),Object(l["h"])("th",{width:"12%"})])],-1),o={class:"h5"},b={class:"text-end"},i={key:0,class:"text-success"},O={key:1,class:"text-muted"},h={class:"text-end"},u={class:"btn-group"},j={key:0,class:"material-icons animate-spin"},p=Object(l["g"])(" 刪除 "),m={colspan:"8",class:"text-end"},f={key:0,class:"material-icons animate-spin"},g=Object(l["g"])(" 刪除所有訂單 "),y={class:"d-flex justify-content-center mt-5"};function v(t,e,c,v,x,k){var w=Object(l["y"])("Pagination"),B=Object(l["y"])("AdminOrderModal"),M=Object(l["y"])("DelAllOrders");return Object(l["t"])(),Object(l["d"])("div",a,[Object(l["h"])("div",d,[n,Object(l["h"])("table",r,[s,Object(l["h"])("tbody",null,[(Object(l["t"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(x.orders,(function(e){return Object(l["t"])(),Object(l["d"])("tr",{class:"align-middle",key:e.id},[Object(l["h"])("td",null,Object(l["B"])(t.$filters.date(e.create_at)),1),Object(l["h"])("td",null,Object(l["B"])(e.user.name),1),Object(l["h"])("td",null,Object(l["B"])(e.user.email),1),Object(l["h"])("td",null,Object(l["B"])(e.user.tel),1),Object(l["h"])("td",null,Object(l["B"])(e.user.address),1),Object(l["h"])("td",null,[Object(l["h"])("div",o,Object(l["B"])(e.total)+" 元",1)]),Object(l["h"])("td",b,[e.is_paid?(Object(l["t"])(),Object(l["d"])("strong",i,"已付款")):(Object(l["t"])(),Object(l["d"])("span",O,"未付款"))]),Object(l["h"])("td",h,[Object(l["h"])("div",u,[Object(l["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return k.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(l["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return k.deleteOrder(e)}},[x.loadingStatus.loadingItem===e.id?(Object(l["t"])(),Object(l["d"])("span",j," cached ")):Object(l["e"])("",!0),p],8,["onClick"])])])])})),128))]),Object(l["h"])("tfoot",null,[Object(l["h"])("tr",null,[Object(l["h"])("td",m,[Object(l["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[1]||(e[1]=function(e){return k.openModal("delete",t.item)}),disabled:x.orders<=1},[1===x.loadingStatus.loadingItem?(Object(l["t"])(),Object(l["d"])("span",f," cached ")):Object(l["e"])("",!0),g],8,["disabled"])])])])]),Object(l["h"])("div",y,[Object(l["h"])(w,{page:x.pagination,onGetProduct:k.getOrder},null,8,["page","onGetProduct"])]),Object(l["h"])(B,{ref:"adminOrderModal","edit-order":x.tempOrder,onUpdateOrder:k.updateOrder},null,8,["edit-order","onUpdateOrder"]),Object(l["h"])(M,{ref:"adminOrderDelModal",onDeleteAllOrders:k.deleteAllOrders},null,8,["onDeleteAllOrders"])])])}var x=c("5530"),k=(c("99af"),c("1799")),w={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"customerOrderModalLabel","aria-hidden":"true"},B={class:"modal-dialog modal-xl modal-dialog-centered"},M={class:"modal-content border-0"},A=Object(l["h"])("div",{class:"modal-header bg-primary text-white"},[Object(l["h"])("h5",{id:"customerOrderModalLabel",class:"modal-title"},[Object(l["h"])("span",null,"修改客戶訂單內容")]),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},$=Object(l["h"])("h3",{class:"text-primary"},"選購商品",-1),_={class:"px-3"},D={class:"table align-middle"},S=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"縮圖"),Object(l["h"])("th",null,"品名"),Object(l["h"])("th",null,"類別"),Object(l["h"])("th",null,"數量"),Object(l["h"])("th",{class:"text-end"},"單價"),Object(l["h"])("th",{class:"text-end"},"合計")])],-1),I={class:"text-end"},L={class:"text-end"},P={class:"row"},U={class:"col-md-4"},J=Object(l["h"])("h3",{class:"text-primary"},"用戶資料",-1),q={class:"table"},E={key:0},G=Object(l["h"])("th",{style:{width:"100px"}},"姓名",-1),F=Object(l["h"])("th",null,"Email",-1),V=Object(l["h"])("th",null,"電話",-1),z=Object(l["h"])("th",null,"地址",-1),H={class:"col-md-8"},K=Object(l["h"])("h3",{class:"text-primary"},"訂單細節",-1),N={class:"table"},Q=Object(l["h"])("th",{style:{width:"100px"}},"訂單編號",-1),R=Object(l["h"])("th",null,"下單時間",-1),T=Object(l["h"])("th",null,"付款時間",-1),W={key:0},X={key:1},Y=Object(l["h"])("th",null,"付款狀態",-1),Z={key:0,class:"text-success"},tt={key:1,class:"text-muted"},et=Object(l["h"])("th",null,"總金額",-1),ct={class:"d-flex justify-content-end"},lt={class:"form-check"},at={class:"form-check-label",for:"flexCheckDefault"},dt={key:0},nt={key:1},rt={class:"modal-footer"},st=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ot(t,e,c,a,d,n){return Object(l["t"])(),Object(l["d"])("div",w,[Object(l["h"])("div",B,[Object(l["h"])("div",M,[A,Object(l["h"])("div",C,[$,Object(l["h"])("div",_,[Object(l["h"])("table",D,[S,Object(l["h"])("tbody",null,[(Object(l["t"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(d.tempOrder.products,(function(t){return Object(l["t"])(),Object(l["d"])("tr",{key:t.id},[Object(l["h"])("th",null,[Object(l["h"])("img",{class:"product-img",src:t.product.imageUrl,alt:t.product.title},null,8,["src","alt"])]),Object(l["h"])("th",null,Object(l["B"])(t.product.title),1),Object(l["h"])("th",null,Object(l["B"])(t.product.category),1),Object(l["h"])("td",null,Object(l["B"])(t.qty)+" / "+Object(l["B"])(t.product.unit),1),Object(l["h"])("td",I,Object(l["B"])(t.product.price),1),Object(l["h"])("td",L,Object(l["B"])(t.qty*t.product.price),1)])})),128))])])]),Object(l["h"])("div",P,[Object(l["h"])("div",U,[J,Object(l["h"])("table",q,[d.tempOrder.user?(Object(l["t"])(),Object(l["d"])("tbody",E,[Object(l["h"])("tr",null,[G,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.user.name),1)]),Object(l["h"])("tr",null,[F,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.user.email),1)]),Object(l["h"])("tr",null,[V,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.user.tel),1)]),Object(l["h"])("tr",null,[z,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.user.address),1)])])):Object(l["e"])("",!0)])]),Object(l["h"])("div",H,[K,Object(l["h"])("table",N,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[Q,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.id),1)]),Object(l["h"])("tr",null,[R,Object(l["h"])("td",null,Object(l["B"])(t.$filters.date(d.tempOrder.create_at)),1)]),Object(l["h"])("tr",null,[T,Object(l["h"])("td",null,[d.tempOrder.paid_date?(Object(l["t"])(),Object(l["d"])("span",W," 123 ")):(Object(l["t"])(),Object(l["d"])("span",X,"時間不正確"))])]),Object(l["h"])("tr",null,[Y,Object(l["h"])("td",null,[d.tempOrder.is_paid?(Object(l["t"])(),Object(l["d"])("strong",Z,"已付款")):(Object(l["t"])(),Object(l["d"])("span",tt,"尚未付款"))])]),Object(l["h"])("tr",null,[et,Object(l["h"])("td",null,Object(l["B"])(d.tempOrder.total),1)])])])]),Object(l["h"])("div",ct,[Object(l["h"])("div",lt,[Object(l["J"])(Object(l["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return d.tempOrder.is_paid=t})},null,512),[[l["E"],d.tempOrder.is_paid]]),Object(l["h"])("label",at,[d.tempOrder.is_paid?(Object(l["t"])(),Object(l["d"])("span",dt,"已付款")):(Object(l["t"])(),Object(l["d"])("span",nt,"未付款"))])])])])]),Object(l["h"])("div",rt,[st,Object(l["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("update-order",d.tempOrder)})}," 確認 ")])])])],512)}var bt=c("8edb"),it={emits:["update-order"],props:{editOrder:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{}}},watch:{editOrder:function(){this.tempOrder=this.editOrder}},mixins:[bt["a"]]};it.render=ot;var Ot=it,ht={id:"delAllOrderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delAllOrderModalLabel","aria-hidden":"true"},ut={class:"modal-dialog modal-dialog-centered"},jt={class:"modal-content border-0"},pt=Object(l["f"])('<div class="modal-header bg-danger text-white"><h5 id="delAllOrderModalLabel" class="modal-title"><span>刪除全部訂單</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center"> 是否刪除所有訂單<br><strong class="text-danger fs-4">刪除後將無法復原</strong></div>',2),mt={class:"modal-footer"},ft=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function gt(t,e,c,a,d,n){return Object(l["t"])(),Object(l["d"])("div",ht,[Object(l["h"])("div",ut,[Object(l["h"])("div",jt,[pt,Object(l["h"])("div",mt,[ft,Object(l["h"])("button",{onClick:e[1]||(e[1]=function(e){return t.$emit("delete-all-orders")}),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var yt={data:function(){return{modal:""}},mixins:[bt["a"]]};yt.render=gt;var vt=yt,xt={data:function(){return{loadingStatus:{loadingItem:""},orders:{},pagination:{},tempOrder:{}}},components:{Pagination:k["a"],AdminOrderModal:Ot,DelAllOrders:vt},methods:{getOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pagination.current_page||1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/orders?page=").concat(e,";");this.$http.get(c).then((function(e){if(e.data.success){var c=e.data,l=c.orders,a=c.pagination;t.orders=l,t.pagination=a,console.log(t.orders)}})).catch((function(t){console.log(t)}))},deleteOrder:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",alert(t.data.message),e.getOrder())})).catch((function(t){console.log(t)}))},deleteAllOrders:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/order/all");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",alert(e.data.message),t.getOrder())})).catch((function(t){console.log(t)}))},openModal:function(t,e){switch(t){case"edit":this.getOrder(),this.tempOrder=Object(x["a"])({},e),console.clear(),console.log(this.tempOrder),this.$refs.adminOrderModal.openModal();break;case"delete":this.$refs.adminOrderDelModal.openModal();break;default:break}},updateOrder:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/admin/order/").concat(t.id);this.$http.put(c,{data:t}).then((function(t){t.data.success?(e.$refs.adminOrderModal.closeModal(),e.getOrder()):alert(t.data.message)})).catch((function(t){console.log(t)}))}},created:function(){console.clear(),this.getOrder()}};xt.render=v;e["default"]=xt},b0c0:function(t,e,c){var l=c("83ab"),a=c("9bf2").f,d=Function.prototype,n=d.toString,r=/^\s*function ([^ (]*)/,s="name";l&&!(s in d)&&a(d,s,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-dfd9a15a.3e84c0ed.js.map